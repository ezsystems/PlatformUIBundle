<!doctype html>
<html>
<head>
    <title>eZ Navigation Hub view tests</title>
    <link rel="stylesheet" href="../../../Resources/public/css/views/navigationhub.css" />
    <style>
        /* to make sure the corresponding sub menu is outside of the viewport */
        .ez-view-navigationhubview .ez-more { margin-right: -1em; }
    </style>
</head>
<body>

<div class="container ez-view-navigationhubview"></div>

<script type="text/x-handlebars-template" id="navigationhubview-ez-template">
<a href="#" class="ez-logout">Logout</a>
<ul class="ez-zones-navigation">
    <li class="ez-zone ez-create-zone" data-navigation="create">Create</li>
    <li class="ez-zone ez-optimize-zone" data-navigation="optimize">Optimize</li>
</ul>
<nav class="ez-navigation">
    {{#each menus}}
        <ul class="ez-navigation-{{@key}}">
            {{#each this}}
                <li {{#if children}}class="ez-sub-menu-link"{{/if}}><a class="ez-navigation-item" href="{{href}}">{{title}}</a>
                {{#if children}}
                    <ul class="ez-sub-menu">
                    {{#each children}}
                        <li><a class="ez-navigation-item" href="{{href}}">{{title}}</a></li>
                    {{/each}}
                    </ul>
                {{/if}}
                </li>
            {{/each}}
            <li class="ez-more ez-sub-menu-link">
                <a href="#" class="ez-navigation-item">More</a>
                <ul class="ez-sub-menu">
                    <li><a class="ez-navigation-item" href="#">Extensions 11</a></li>
                    <li><a class="ez-navigation-item" href="#">Extensions 12</a></li>
                    <li><a class="ez-navigation-item" href="#">Extensions 13</a></li>
                    <li><a class="ez-navigation-item" href="#">Extensions 14</a></li>
                    <li><a class="ez-navigation-item" href="#">Extensions 15</a></li>
                    <li><a class="ez-navigation-item last" href="#">Extensions 16</a></li>
                </ul>
            </li>
        </ul>
    {{/each}}
</nav>
</script>

<script type="text/javascript" src="../../../Resources/public/vendors/yui3/build/yui/yui.js"></script>
<script type="text/javascript" src="./assets/ez-navigationhubview-tests.js"></script>
<script>
    var filter = (window.location.search.match(/[?&]filter=([^&]+)/) || [])[1] || 'raw',
            loaderFilter;
    if (filter == 'coverage'){
        loaderFilter = {
            searchExp : "/Resources/public/js/",
            replaceStr: "/Tests/instrument/Resources/public/js/"
        };
    } else {
        loaderFilter = filter;
    }

    YUI({
        coverage: ['ez-navigationhubview'],
        filter: loaderFilter,
        modules: {
            "ez-navigationhubview": {
                requires: ['ez-templatebasedview', 'event-tap', 'node-screen', 'node-style', 'event-outside'],
                fullpath: "../../../Resources/public/js/views/ez-navigationhubview.js"
            },
            "ez-templatebasedview": {
                requires: ['ez-view', 'handlebars', 'template'],
                fullpath: "../../../Resources/public/js/views/ez-templatebasedview.js"
            },
            "ez-view": {
                requires: ['view', 'base-pluginhost', 'ez-pluginregistry'],
                fullpath: "../../../Resources/public/js/views/ez-view.js"
            },
            "ez-pluginregistry": {
                requires: ['array-extras'],
                fullpath: "../../../../Resources/public/js/services/ez-pluginregistry.js"
            },
        }
    }).use('ez-navigationhubview-tests', function (Y) {
        Y.Test.Runner.run();
    });
</script>
</body>
</html>
