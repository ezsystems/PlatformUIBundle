{# @var content_type \eZ\Publish\API\Repository\Values\ContentType\ContentType #}

{% extends "eZPlatformUIBundle::pjax_admin.html.twig" %}

{% trans_default_domain "content_type" %}

{% set content_type_group = content_type.contentTypeGroups|first %}
{% set content_type_name = content_type.names[language_code]|default('') %}
{% set content_type_description = content_type.descriptions[language_code]|default('') %}

{% block header_breadcrumbs %}
    {% set breadcrumb_items = [
        {link: path('admin_dashboard'), label: 'dashboard.title'|trans({}, 'dashboard')},
        {link: path('admin_contenttype'), label: 'content_type.dashboard_title'|trans},
        {link: path('admin_contenttypeGroupView', {'contentTypeGroupId': content_type_group.id}), label: content_type_group.identifier},
        {link: null, label: content_type_name}
    ] %}
    {{ parent() }}
{% endblock %}

{% block header_title %}
    <h1 class="ez-page-header-name" data-icon="&#xe61a;">{{ content_type_name }} [{{ 'content_type.content_count'|transchoice(content_count) }}]</h1>
{% endblock %}

{% block content %}
    <section class="ez-serverside-content">
        <div class="context-information">
            <p class="modified">
            {{
                "content_type.last_modified"|trans({
                    "%date%": content_type.modificationDate|localizeddate(locale=app.request.locale),
                    "%modifier%": modifier.login
                })
            }}
            </p>
        </div>

        <div class="pure-g">
            <div class="pure-u-1-2">
                <div>
                    <h6>{{ "content_type.name"|trans }}</h6>
                    {{ content_type_name }}
                </div>

                <div>
                    <h6>{{ "content_type.identifier"|trans }}:</h6>
                    {{ content_type.identifier }}
                </div>

                <div>
                    <h6>{{ "content_type.description"|trans }}:</h6>
                    {{ content_type_description }}
                </div>

                <div>
                    <h6>{{ "content_type.name_schema"|trans }}:</h6>
                    {{ content_type.nameSchema }}
                </div>

                <div>
                    <h6>{{ "content_type.url_alias_schema"|trans }}:</h6>
                    {{ content_type.urlAliasSchema }}
                </div>
            </div>

            <div class="pure-u-1-2">
                <div>
                    <h6>{{ "content_type.container"|trans }}:</h6>
                    <input type="checkbox" disabled{% if content_type.isContainer %} checked{% endif %}>
                </div>

                <div>
                    <h6>{{ "content_type.default_availability"|trans }}:</h6>
                    {{ content_type.defaultAlwaysAvailable ? "content_type.always_available"|trans : "content_type.no_always_available"|trans }}
                </div>

                <div>
                    <h6>{{ "content_type.default_children_sorting"|trans }}:</h6>
                    {{ ("content_type.sort_field." ~ content_type.defaultSortField)|trans(domain="ezrepoforms_content_type") }} / {{ ("content_type.sort_order." ~ content_type.defaultSortOrder)|trans(domain="ezrepoforms_content_type") }}
                </div>
            </div>

            <div class="pure-u-1">
                <a href="{{ path('admin_contenttypeUpdate', {'contentTypeId': content_type.id}) }}" class="pure-button ez-button{% if not can_edit %} pure-button-disabled{% endif %}" data-icon="&#xe606;">{{ 'content_type.edit'|trans }}</a>
                <form method="post" action="{{ path('admin_contenttypeRemove', {'contentTypeId': content_type.id}) }}">
                    <button class="ez-button-remove ez-button pure-button ez-confirm-action{% if not can_remove %} pure-button-disabled{% endif %}"
                            data-icon="&#xe606;"
                            data-confirmbox-title="{{ "content_type.remove_dialog_title"|trans({ "%content_type_name%": content_type_name }) }}"
                            data-confirmbox-details-selector=".ez-confirmbox-content-type-removal-details">
                        {{ 'content_type.remove'|trans }}
                    </button>
                </form>
                <div class="ez-confirmbox-content-type-removal-details hidden">
                    <p>
                    {% if content_count > 0 %}
                        {{
                            "content_type.remove_dialog_text_has_content"|trans({
                                "%content_type_count%": "<b>" ~ content_count ~ "</b>",
                                "%content_type_name%": content_type_name
                            })
                        }}
                    {% else %}
                        {{
                            "content_type.remove_dialog_text_no_content"|trans({
                                "%content_type_name%": content_type_name
                            })
                        }}
                    {% endif %}
                    </p>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block title %}{{ content_type_name }}{% endblock %}


